
  <!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Reading," />





  <link rel="alternate" href="/atom.xml" title="Lucia" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="一本有关弃坑和填坑的小书。">
<meta property="og:type" content="article">
<meta property="og:title" content="读 《the Dip》">
<meta property="og:url" content="http://lupeipei.github.io/posts/notes-of-the-dip/index.html">
<meta property="og:site_name" content="Lucia">
<meta property="og:description" content="一本有关弃坑和填坑的小书。">
<meta property="og:locale">
<meta property="og:image" content="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwly1g9m6bn5aplj30w80cugmi.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwgy1g9mtlp5017j30wq0ga75a.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwly1g9m7beikx0j30w00fgwgk.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwgy1g9mr89wa2yj30x80hcac0.jpg">
<meta property="article:published_time" content="2019-12-06T04:44:59.000Z">
<meta property="article:modified_time" content="2019-12-06T04:52:08.000Z">
<meta property="article:author" content="Lucia">
<meta property="article:tag" content="Reading">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwly1g9m6bn5aplj30w80cugmi.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://lupeipei.github.io/posts/notes-of-the-dip/"/>





  <title> 读 《the Dip》 | Lucia </title>
<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lucia</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-series">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-file-text"></i> <br />
            
            专题
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-post " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/posts/notes-of-the-dip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                读 《the Dip》
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T12:44:59+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Reading/" itemprop="url" rel="index">
                    <span itemprop="name">Reading</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <span class="post-letters-count">
              &nbsp; | &nbsp;
              <span>1.3k words</span>
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>一本有关弃坑和填坑的小书。</p>
<span id="more"></span>

<p>作者给了一些方法，一些鸡血，读来挺提神。</p>
<p>书中提到的点蛮多，反复强调quitting，这里简单记录下自己觉得重点的东西。</p>
<h4 id="何时弃坑？"><a href="#何时弃坑？" class="headerlink" title="何时弃坑？"></a>何时弃坑？</h4><p>当你去完成一件事情时，有三张曲线图可以基本概括你面对的所有场景。</p>
<ul>
<li>The Dip</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwly1g9m6bn5aplj30w80cugmi.jpg" alt="image-20191205213646047"></p>
<p><strong>Almost everything in life worth doing is controlled by the Dip.</strong></p>
<p>「但并不是所有呈现出 The Dip 曲线的事情，都值得你去做。资源是有限的，选择适合你的那些。」</p>
<ul>
<li>The CUL-DE-SAC</li>
</ul>
<p>CUL-DE-SAC 意为法语中的“dead end”。</p>
<p>“dead end”指那些既不会变得很糟糕，也不会变得很美好的场景。「人的主观能动性无法改善事物的发展。」</p>
<blockquote>
<p>It’s a situation where you work and you work and you work and nothing much changes. It doesn’t get a lot better, it doesn’t get a lot worse. It just is.</p>
</blockquote>
<p>显然，把时间和精力放在不会改善的事物上，是不明智的，机会成本太大。</p>
<p><strong>The opportunity cost of investing your life in something that’s not going to get better is just too high.</strong></p>
<ul>
<li><p>The Cliff</p>
<p><img src="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwgy1g9mtlp5017j30wq0ga75a.jpg" alt="image-20191205215836995"></p>
<p>这条曲线不是很好理解。</p>
<p>什么样的情况下，随着你的投入，先是结果越来越好，直至达到顶峰，然后陡然迅速下滑？书中举了一个例子，有关抽烟带给人的愉快感，随着抽烟的时长越来越长，愉悦感是递增的，一直递增到顶峰，随后急速下滑。「有点像经济学里面提到的边际效益递减，但是这里显然是一条很陡的下滑线，哪里是递减，简直是速减。」</p>
</li>
</ul>
<p>很显然，不管是The CUL-DE-SAC还是The Cliff，你都要选择果断的弃坑。</p>
<p>只有The Dip才是值得你去填的坑，The Dip creates scarcity; scarcity creates value。</p>
<p><img src="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwly1g9m7beikx0j30w00fgwgk.jpg" alt="image-20191205221110760"></p>
<p>「这里稍稍要注意下，有些事值得去做，它本身是The Dip，但是鉴于你的能力和资源，对你而言它可能就是The CUL-DE-SAC，这种在涉及到个体天赋的领域里，比如艺术，可能更为明显，所以找到你的The Dip也很重要。」</p>
<ul>
<li>quitting a tactic VS quitting a Strategy</li>
</ul>
<p>策略性退出与战略性退出。</p>
<blockquote>
<p>Not giving up and abandoning your long-term strategy (wherever you might be using that strategy—a career, an income, a relationship, a sale) but quitting the tactics that aren’t working.</p>
</blockquote>
<p>不放弃长期的战略，实时调整你的策略，终止那些无效的策略。</p>
<ul>
<li><p>quitting before you start</p>
<p>最终极的弃坑策略：从一开始就不要开坑。</p>
</li>
</ul>
<h4 id="正确看待-The-Dip"><a href="#正确看待-The-Dip" class="headerlink" title="正确看待 The Dip"></a>正确看待 The Dip</h4><p>The Dip 既是死亡之谷，也是极大的机会。</p>
<p>它是死亡之谷，帮你远远抛开其他的竞争对手。「有些类似穷查理里面提到的护城河」</p>
<blockquote>
<p>to create a Dip so long and so deep that the nascent competition can’t catch up.</p>
</blockquote>
<p>它是 Big opportunity. 只要你能 get through the Dip。</p>
<blockquote>
<p>If you can get through the Dip, if you can keep going when the system is expecting you to stop, you will achieve extraordinary results. People who make it through the Dip are scarce indeed, so they generate more value.</p>
</blockquote>
<p><strong>Embrace the Dip and treat it like the opportunity that it really is.</strong></p>
<p>The Dip 不是静态的，而是动态的，灵活的，它根据你的投入来回应你。</p>
<blockquote>
<p>The Dip is flexible. It responds to the effort you put into it. In fact, it’s quite likely (in almost every case) that aggressive action on your part can make the Dip a lot worse. Or a lot better.</p>
</blockquote>
<p>Let us make the Dip a lot better.</p>
<h4 id="Get-Through-The-Dip"><a href="#Get-Through-The-Dip" class="headerlink" title="Get Through The Dip"></a>Get Through The Dip</h4><p>几点建议：</p>
<ul>
<li><p>Don’t switch lines frequently.</p>
<p>不要频繁在多个The Dip间切换，最终只会导致更多资源的白白浪费。</p>
</li>
<li><p>If you are not able to  get through the Dip in an exceptional way, quit, quit right now.</p>
<p>如果确信自己不能搞定 The Dip，果断弃坑，立刻，马上。</p>
</li>
<li><p>Short-term pain has more impact on most people than long-term benefits do.</p>
<p>对大部分人来说，相比长期的收益，短期的痛苦给人带来的影响更大更直接，更容易让人倾向于放弃。那么要如何破局？善于坚持的人懂得让自己的目标可视化，阶段化目标的完成。「再一次，feedback is important.」</p>
<p><strong>Persistent people are able to visualize the idea of light at the end of the tunnel when others can’t see it.</strong></p>
<p>诚如书中所提到的，跑全马时，怎么能在20 英里 的时候放弃，是不是？</p>
<p><img src="https://raw.githubusercontent.com/Lupeipei/blogImages/master/images/006tNbRwgy1g9mr89wa2yj30x80hcac0.jpg" alt="image-20191206094008879"></p>
</li>
</ul>
<h4 id="一点感想"><a href="#一点感想" class="headerlink" title="一点感想"></a>一点感想</h4><p>书的开头提到了这么一段：</p>
<blockquote>
<p>Quit the wrong stuff.</p>
<p>Stick with the right stuff.</p>
<p>Have the guts to do one or the other.</p>
</blockquote>
<p>算是整本书的一个小小总结。</p>
<p>在时间和精力有限的情况下，弃坑很重要，放弃一个你永远都攀不过的山峰，将时间和精力集中起来，专注于那些有难度，但可以攀过的山峰。</p>
<p>作者在书中举了很多例子来支持自己的观点，印象特别的是畅销书作家 Michael Crichton，一个从Harvard 医学院毕业，在 Salk 生物学研究所进行了博士后研究，已经 攀过 The Dip 的人，但他放弃了眼前已铺好的康庄大道，大好前程，选择遵从内心，成为一名作家。「再一次，决策时，忽略沉没成本。」</p>
<p>最终的最终，还是那句，人生苦短，去他的机会成本，世俗成败，follow your heart, embrace the Dip you love。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div class="reward-container">
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      <span>赞赏支持</span>
    </button>
    <div id="qr" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechat.png" alt=" WeChat Pay"/>
          <p>Wechat</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/alipay.png" alt=" Alipay"/>
          <p>Alipay</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Reading/" rel="tag"># Reading</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/custom-array-input-in-simple-form/" rel="next" title="Simple form 添加 array input 组件">
                <i class="fa fa-chevron-left"></i> Simple form 添加 array input 组件
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/recent-error-recording-3/" rel="prev" title="近期出错小记III">
                近期出错小记III <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      
  <script src="https://utteranc.es/client.js"
    repo="Lupeipei/Lupeipei.github.io"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>


    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">330</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">70</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Lupeipei" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/luciaca27276337" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%95%E6%97%B6%E5%BC%83%E5%9D%91%EF%BC%9F"><span class="nav-number">1.</span> <span class="nav-text">何时弃坑？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A3%E7%A1%AE%E7%9C%8B%E5%BE%85-The-Dip"><span class="nav-number">2.</span> <span class="nav-text">正确看待 The Dip</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Get-Through-The-Dip"><span class="nav-number">3.</span> <span class="nav-text">Get Through The Dip</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E7%82%B9%E6%84%9F%E6%83%B3"><span class="nav-number">4.</span> <span class="nav-text">一点感想</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lucia</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
  &nbsp; | &nbsp;
  <span class="post-count">
    <i class="fa fa-pencil" aria-hidden="true"></i>
    389.9k
  </span>

</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  

  

</body>
</html>



