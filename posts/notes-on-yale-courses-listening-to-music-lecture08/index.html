
  <!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Music," />





  <link rel="alternate" href="/atom.xml" title="Lucia" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="继续和声部分的理论知识，继续懵逼ing……  Review of Chord Formation 三和弦 CEG，C 是 根音The root of the triad tonic (I) the dominant (V) sub-dominant(IV): right next to and below the dominant  a I chord built on the first deg">
<meta property="og:type" content="article">
<meta property="og:title" content="Lecture 08 Bass Patterns - Blues and Rock">
<meta property="og:url" content="http://lupeipei.github.io/posts/notes-on-yale-courses-listening-to-music-lecture08/index.html">
<meta property="og:site_name" content="Lucia">
<meta property="og:description" content="继续和声部分的理论知识，继续懵逼ing……  Review of Chord Formation 三和弦 CEG，C 是 根音The root of the triad tonic (I) the dominant (V) sub-dominant(IV): right next to and below the dominant  a I chord built on the first deg">
<meta property="og:locale">
<meta property="article:published_time" content="2020-02-10T14:17:20.000Z">
<meta property="article:modified_time" content="2021-12-21T14:50:06.404Z">
<meta property="article:author" content="Lucia">
<meta property="article:tag" content="Music">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://lupeipei.github.io/posts/notes-on-yale-courses-listening-to-music-lecture08/"/>





  <title></title>
<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  <div class="container   ">
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner" style="display: none;"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lucia</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-series">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-file-text"></i> <br />
            
            专题
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner" style="width: 100%;">
        <div class="sidebar-book">
  
    <div class="sidebar-book-header">
      <div class="title">Yale《listening to music》刷课笔记</div>
    </div>
  

  <div class="sidebar-book-body">
    <div class="book-catalog-body">
      <div class="book-toc-content">
        <ul>
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-preface/" class="text">Preface</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture01/" class="text">Lecture 01 Introduction</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture02/" class="text">Lecture 02 Introduction to Instruments and Musical Genres</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture03/" class="text">Lecture 03 Rhythm - Fundamentals</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture04/" class="text">Lecture 04  Rhythmi - Jazz, Pop and Classical</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture05/" class="text">Lecture 05 Melody - Notes, Scales, Nuts and Bolts</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture06/" class="text">Lecture 06 Melody - Mozart and Wagner</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture07/" class="text">Lecture 07 Harmony - Chords and How to Build Them</a>
              </li>
            
          
            
            
              <li class="active">
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture08/" class="text">Lecture 08 Bass Patterns - Blues and Rock</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture09/" class="text">Lecture 09 Sonata-Allegro Form - Mozart and Beethoven</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture10/" class="text">Lecture 10 Sonata-Allegro and Theme and Variations</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture11/" class="text">Lecture 11 Form - Rondo, Sonata-Allegro and Theme and Variations</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture12/" class="text">Lecture 12 Guest Conductor - Saybrook Orchestra</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture13/" class="text">Lecture 13 Fugue - Bach, Bizet and Bernstein</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture14/" class="text">Lecture 14 Ostinato Form</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture15/" class="text">Lecture 15 Gregorian Chant and Music in the Sistine Chapel</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture16/" class="text">Lecture 16 Baroque Music - The Vocal Music of Johann Sebastian Bach</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture17/" class="text">Lecture 17 Mozart and His Operas</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture18/" class="text">Lecture 18 Piano Music of Mozart and Beethoven</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture19/" class="text">Lecture 19 Romantic Opera - Verdi's La Traviata, Bocelli, Pavarotti and Domingo</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture20/" class="text">Lecture 20 The Colossal Symphony - Beethoven, Berlioz, Mahler and Shostakovich</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture21/" class="text">Lecture 21 Musical Impressionism and Exoticism - Debussy, Ravel and Monet</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture22/" class="text">Lecture 22 Modernism and Mahler</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture23/" class="text">Lecture 23 Review of Musical Style</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-final/" class="text">Final</a>
              </li>
            
          
        </ul>
      </div>
    </div>
  </div>
  
</div>

        <div class="content-wrap" style="margin-left: 280px; padding: 30px;">
          <div id="content" class="content">
            
<div class="content-book">
  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-book " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/posts/notes-on-yale-courses-listening-to-music-lecture08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Lecture 08 Bass Patterns - Blues and Rock
              
            
          </h1>
        
      <div class="post-meta"></div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>继续和声部分的理论知识，继续懵逼ing……</p>
<ul>
<li><p>Review of Chord Formation</p>
<p>三和弦 CEG，C 是 根音The root of the triad</p>
<p>tonic (I)</p>
<p>the dominant (V)</p>
<p>sub-dominant(IV): right next to and below the dominant</p>
<blockquote>
<p>a I chord built on the first degree of the scale,</p>
<p>a V chord built on the fifth degree of the scale,</p>
<p>a IV chord built on the fourth degree,</p>
<p>and a VI chord built on the sixth degree.</p>
</blockquote>
<p>When an orchestra plays or an ensemble plays and they’re  just playing individual notes that all together form a chord.</p>
<p>Question: Why do we change chords?</p>
<blockquote>
<p>Because the melody changes and not all harmonies are concordant with every note.</p>
</blockquote>
<p>这里，教授提到了pitch音高，感觉挺有意思。</p>
<p>什么情况下，pitch dissonant (音不和谐)？</p>
<p><strong>pitches that are right next to each other — very close to each other — are dissonant.</strong></p>
<p>The closer these pitches are together, the more likely they are to be dissonant.</p>
<p>所以弹CD会dissonant，弹CA就不会, because you allow a little separation between the two pitches, that makes them consonant, much better.</p>
</li>
<li><p>Chord Progressions and Harmonic Change</p>
<p>Chord Progressions： 和弦进行？</p>
<p>what is chord progression?</p>
<blockquote>
<p>A sequence of chords that sound good together, kind of make sense together.</p>
<p>They seem to be going somewhere and there’s this sort of force of pull or gravity in music having to do with some chords wanting to go to other chords.</p>
</blockquote>
<p>如何能听到这些chord？如何能听到chord progression？如何能听到和声？</p>
<blockquote>
<p>to get a sense of harmony we’re going to listen to the bass.</p>
<p>听低音部分，“下”到低音。</p>
</blockquote>
<p>听的时候，注意什么？</p>
<blockquote>
<p>figure out if the harmony is changing, and if it is changing whether it’s changing at a regular or irregular rate.</p>
<p>和声是否变化，变化是规律的还是不规律的？</p>
</blockquote>
<p>Almost all classical music involves irregular rates of harmonic change.</p>
<p>练习：Richard Wagner’s Ring Cycle 开头部分。</p>
<blockquote>
<p>Richard Wagner’s Ring Cycle： 尼伯龙根的指环，由瓦格纳作曲及编剧，整个于1848年开始创作，至1874年完成，历时共26年。</p>
<p>尼伯龙根的指环是一个由四部歌剧组成的系列，分别为：</p>
<ul>
<li><p>莱茵的黄金</p>
</li>
<li><p>女武神</p>
</li>
<li><p>齐格弗里德</p>
</li>
<li><p>诸神的黄昏</p>
</li>
</ul>
</blockquote>
<p>练习：Dave Matthews Ban的作品片段</p>
<p>练习：Mozart’s G Minor Symphony 【听起来应该是 Symphony no.40】</p>
<p>赏析：【不懂系列】</p>
<blockquote>
<p>At the beginning,  these chords are holding for four measures or a total of eight beats.</p>
<p>Then as it goes on,Then we’re getting two changes per beat.It’s getting faster and faster and faster.</p>
<p>The amount of time that each chord is holding is getting shorter and shorter and shorter as we drive into that cadence. cadence is simply the end of a musical phrase, particularly in this case the end of a chord progression, where we are at a point of arrival; the cadence brings us to a point of arrival. So that’s a piece of Mozart.</p>
</blockquote>
<p>练习：Beethoven‘s Symphony no.6, Pastoral Symphony【田园交响曲，田园牧歌】</p>
<p>赏析：</p>
<blockquote>
<p>He’s doing the opposite of what Mozart did. He’s trying to relax us here by slowing down the rate of harmonic change here. That held for about thirty seconds, that tonic chord.</p>
</blockquote>
</li>
<li><p>Popular and Classical Music Chord Progressions</p>
<p>流行音乐中的和弦进行。</p>
<p>What does pop music do for us that’s very helpful?</p>
<ul>
<li><p>regularity and repetition</p>
</li>
<li><p>most of the chords in rock music in particular tend to be <strong>root-position</strong> chords, and for that reason they’re easier to hear.</p>
</li>
</ul>
<p>练习：Badly Drawn Boy 的歌 【regular，two chords, 没听出来】</p>
<p>练习： Justin Timberlake 【regular，four chords, each chord was holding for two beats there in duple meter】</p>
<p>What’s the difference between pop and classical music?</p>
<blockquote>
<p>pop music tends to have simpler harmonies, and that those harmonies tend to be more repetitious, that they tend to have harmonies that have chords in root position.</p>
<p>We’ve got text in pop music that tells us what this music means. classical music, probably eighty-five percent of it, does not involve a text, and that’s a whole different ballgame because then <strong>you have to communicate meaning in a completely different sort of way</strong>.</p>
<p>pop music are much shorter.</p>
<p>Most classical music is written down.</p>
<p>The structure of a popular piece is often more predictable in pattern and verses and bridges and chorus whereas with classical music you really can’t predict what part of the movement you’re at.</p>
<p>classic music has the capacity for expansion.</p>
</blockquote>
</li>
<li><p>Three-Chord Progressions</p>
<p>练习：Beach Boys’s 歌片段，它是 Three-Chord Progressions， 和弦的顺序为 sub-dominant (IV), dominant (V), tonic (I)</p>
<p>练习：Beethoven‘s Symphony no.6 最后一个乐章</p>
<p>出场的乐器：单簧管Clarinet，法国号French horn</p>
<p>using the same three-chord chord progressions  in the Beach Boys.</p>
</li>
<li><p>Four-Chord Progressions</p>
<p>练习：Gene Chandler’s Duke of Earl</p>
<p>赏析：</p>
<blockquote>
<p>got four chords I, VI, IV, V, I, VI, IV, V  operating here and they’re changing regularly.</p>
<p>what happened in that middle section?</p>
<p>it went on and on and on, longer, longer, longer, then in that middle section each chord was changing at the rate of two measures. So the whole piece, then, would be a piece involving irregular rate of change.</p>
</blockquote>
<p>练习：Mozart’s Symphony No. 5 in B-flat, 低音部分同Gene Chandler’s Duke of Earl</p>
<p>练习：a passage of composer Gioachino Rossini‘s opera 【完全懵逼， 听懂的感觉一定很好玩吧？】</p>
<p>赏析：</p>
<blockquote>
<p>the first thing we got to do is sort of lock on to the tonic.</p>
<p>If you ever hear music rocking back and forth repeatedly between two chords, it’s probably tonic,  dominant, tonic, dominant.</p>
<p>It was  I, VI, IV, V, I progression.</p>
<p>what happened next was he then started to run that faster, twice as fast as it had been before, changing rate of harmonic pattern.</p>
<p>The end of that was all just the tonic. He just sat there on the tonic forever. It’s a good example of sort of real time and psychological time in music. You knew it was time to start clapping as soon as that chord hit that.</p>
</blockquote>
</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Music/" rel="tag"># Music</a>
          
        </div>
      

      
        
      

      
        
      

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/notes-on-yale-courses-listening-to-music-lecture07/" rel="next" title="Lecture 07 Harmony - Chords and How to Build Them">
                <i class="fa fa-chevron-left"></i> Lecture 07 Harmony - Chords and How to Build Them
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/notes-on-yale-courses-listening-to-music-lecture09/" rel="prev" title="Lecture 09 Sonata-Allegro Form - Mozart and Beethoven">
                Lecture 09 Sonata-Allegro Form - Mozart and Beethoven <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>
</div>

          </div>
          


          
  <div class="comments" id="comments">
    
      
  <script src="https://utteranc.es/client.js"
    repo="Lupeipei/Lupeipei.github.io"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>


    
  </div>


        </div>
        
          
        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lucia</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
  &nbsp; | &nbsp;
  <span class="post-count">
    <i class="fa fa-pencil" aria-hidden="true"></i>
    383.3k
  </span>

</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  

  

</body>
</html>



