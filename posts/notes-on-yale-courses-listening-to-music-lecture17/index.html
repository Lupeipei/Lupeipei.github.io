
  <!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Music," />





  <link rel="alternate" href="/atom.xml" title="Lucia" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="这堂课，教授腰间配了一柄剑上场，起初还觉得挺奇怪，后面才知道是安排了一场非常精彩的歌剧，老师真的很用心，很好玩的一节课，大半夜被逗笑了，哈哈。  From Baroque to Classical Music – An Introduction 教授讲述了自己在 Nashville度过了一个愉快的周末，提到自己去的地方。果然，一个人的兴趣爱好决定了TA在一个新的环境里，会对哪些感兴趣。  Frid">
<meta property="og:type" content="article">
<meta property="og:title" content="Lecture 17 Mozart and His Operas">
<meta property="og:url" content="http://lupeipei.github.io/posts/notes-on-yale-courses-listening-to-music-lecture17/index.html">
<meta property="og:site_name" content="Lucia">
<meta property="og:description" content="这堂课，教授腰间配了一柄剑上场，起初还觉得挺奇怪，后面才知道是安排了一场非常精彩的歌剧，老师真的很用心，很好玩的一节课，大半夜被逗笑了，哈哈。  From Baroque to Classical Music – An Introduction 教授讲述了自己在 Nashville度过了一个愉快的周末，提到自己去的地方。果然，一个人的兴趣爱好决定了TA在一个新的环境里，会对哪些感兴趣。  Frid">
<meta property="og:locale">
<meta property="article:published_time" content="2020-03-08T14:17:20.000Z">
<meta property="article:modified_time" content="2021-12-21T14:35:30.721Z">
<meta property="article:author" content="Lucia">
<meta property="article:tag" content="Music">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://lupeipei.github.io/posts/notes-on-yale-courses-listening-to-music-lecture17/"/>





  <title></title>
<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  <div class="container   ">
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner" style="display: none;"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lucia</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-series">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-file-text"></i> <br />
            
            专题
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner" style="width: 100%;">
        <div class="sidebar-book">
  
    <div class="sidebar-book-header">
      <div class="title">Yale《listening to music》刷课笔记</div>
    </div>
  

  <div class="sidebar-book-body">
    <div class="book-catalog-body">
      <div class="book-toc-content">
        <ul>
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-preface/" class="text">Preface</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture01/" class="text">Lecture 01 Introduction</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture02/" class="text">Lecture 02 Introduction to Instruments and Musical Genres</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture03/" class="text">Lecture 03 Rhythm - Fundamentals</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture04/" class="text">Lecture 04  Rhythmi - Jazz, Pop and Classical</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture05/" class="text">Lecture 05 Melody - Notes, Scales, Nuts and Bolts</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture06/" class="text">Lecture 06 Melody - Mozart and Wagner</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture07/" class="text">Lecture 07 Harmony - Chords and How to Build Them</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture08/" class="text">Lecture 08 Bass Patterns - Blues and Rock</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture09/" class="text">Lecture 09 Sonata-Allegro Form - Mozart and Beethoven</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture10/" class="text">Lecture 10 Sonata-Allegro and Theme and Variations</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture11/" class="text">Lecture 11 Form - Rondo, Sonata-Allegro and Theme and Variations</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture12/" class="text">Lecture 12 Guest Conductor - Saybrook Orchestra</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture13/" class="text">Lecture 13 Fugue - Bach, Bizet and Bernstein</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture14/" class="text">Lecture 14 Ostinato Form</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture15/" class="text">Lecture 15 Gregorian Chant and Music in the Sistine Chapel</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture16/" class="text">Lecture 16 Baroque Music - The Vocal Music of Johann Sebastian Bach</a>
              </li>
            
          
            
            
              <li class="active">
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture17/" class="text">Lecture 17 Mozart and His Operas</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture18/" class="text">Lecture 18 Piano Music of Mozart and Beethoven</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture19/" class="text">Lecture 19 Romantic Opera - Verdi's La Traviata, Bocelli, Pavarotti and Domingo</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture20/" class="text">Lecture 20 The Colossal Symphony - Beethoven, Berlioz, Mahler and Shostakovich</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture21/" class="text">Lecture 21 Musical Impressionism and Exoticism - Debussy, Ravel and Monet</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture22/" class="text">Lecture 22 Modernism and Mahler</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-lecture23/" class="text">Lecture 23 Review of Musical Style</a>
              </li>
            
          
            
            
              <li>
                <div class="wholerow"></div>
                <a href="/posts/notes-on-yale-courses-listening-to-music-final/" class="text">Final</a>
              </li>
            
          
        </ul>
      </div>
    </div>
  </div>
  
</div>

        <div class="content-wrap" style="margin-left: 280px; padding: 30px;">
          <div id="content" class="content">
            
<div class="content-book">
  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-book " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/posts/notes-on-yale-courses-listening-to-music-lecture17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Lecture 17 Mozart and His Operas
              
            
          </h1>
        
      <div class="post-meta"></div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>这堂课，教授腰间配了一柄剑上场，起初还觉得挺奇怪，后面才知道是安排了一场非常精彩的歌剧，老师真的很用心，很好玩的一节课，大半夜被逗笑了，哈哈。</p>
<ul>
<li><p>From Baroque to Classical Music – An Introduction</p>
<p>教授讲述了自己在 Nashville度过了一个愉快的周末，提到自己去的地方。果然，一个人的兴趣爱好决定了TA在一个新的环境里，会对哪些感兴趣。</p>
<blockquote>
<p>Friday night, went to this spectacular concert of Mozart.</p>
<p>The next afternoon, Saturday afternoon, I walked across the street. I could have gone two blocks to watch a hockey game — they have a hockey team in Nashville — or three blocks in the other direction to watch the Titans play in the football stadium, but I went just one block to the Country Music Hall of Fame.</p>
</blockquote>
<p>教授讲述的经历基本都是跟Mozart有关，比如机场播放的音乐和广告。</p>
<p>古典时期的音乐 与 巴洛克时期音乐的不同。</p>
<p>Baroque music：</p>
<blockquote>
<p>it will carry through from beginning to end of a particular movement or a particular piece. It doesn’t change, generally speaking. 【基本不变化， the same general tenor, the same general mood, the same general feeling】</p>
</blockquote>
<p>classical music：</p>
<blockquote>
<p>We get change within a particular movement. Change might be from regular to irregular rhythm, for example, or from very loud to very quiet.</p>
</blockquote>
</li>
<li><p>Glimpses of Mozart’s Life in Letters</p>
<p>Mozart留下的大量的手稿，信件，大部分是与他父亲的通信。</p>
<p>欣赏：Mozart Symphony No. 25 in G Minor。</p>
<blockquote>
<p> we begin minor key, lots of syncopation, agitation, and within about forty seconds Mozart has morphed into a completely different mood, a major key, oboe solo. The music is very lyrical. The meter now is — or the rhythms are all lined up to come on the beat rather than off the beat. <strong>Watch how we have this transformation of mood within a rather short period of time.</strong> 【很短的时间里，情绪由不安到舒缓】</p>
</blockquote>
<p>这里，教授推荐了电影《莫扎特传》Amadeus 【码下，ToDoList 真越来越长……】</p>
<p>随后教授讲述了Mozart的一些天才事迹，比如凭记忆写下西斯廷教堂的曲谱。</p>
<p>比较喜欢教授朗读的那段Mozart在1787年写给他父亲的信，当时他的一位朋友过世了，信中讲述了他对于死亡的理解：</p>
<blockquote>
<p>Death is the true goal of our lives and I have made myself so well acquainted with it during the past two years that I see it as the true and best friend of mankind. Indeed, the idea of it no longer holds any terror for me but rather much that is tranquil and comforting, and <strong>I thank God that he has granted me the good fortune to obtain the opportunity of regarding death as the key to our true happiness</strong>. I never retire at night without considering that, as young as I am, perhaps I may be no more on the morrow, yet not one of those who knows me could say that I am morose or melancholy, and for this I thank my creator daily and wish heartily the same happiness may be given to my fellow man. I clearly explained my way of looking at the matter on the occasion of the death of my very dear best friend, Count von Hatzfeld. He was just thirty-one like myself. I do not grieve for him but from the bottom of my heart for myself and for all who knew him as well as I.</p>
</blockquote>
</li>
<li><p>Musical Balance and Genius in Mozart’s Compositional Sketches</p>
<p>What’s special about Mozart’s music? 【Mozart 音乐的独特魅力】</p>
<blockquote>
<p>four things.</p>
<ul>
<li>this infallible sense of balance and proportion. 【balance, shaping, perfect proportion. 不多不少刚刚好】</li>
<li>The capacity to make something very beautiful out of the simplest of materials.【教授以  Elvira Madigan 为例】</li>
<li>wild swings of mood with Mozart</li>
<li>Inexhaustible melodic supply, fecundity of imagination when it comes to melody.【永不枯竭的才思】</li>
</ul>
</blockquote>
<p>Mozart在《唐璜》首演后，跟 Joseph II 皇帝的对话蛮有意思的，自信得一逼：</p>
<blockquote>
<p>Joseph II: Too much meat for the teeth of my Viennese, dear Mozart.</p>
<p>Mozart: Well, let them chew on it a while. They’ll get used to it.</p>
</blockquote>
<p>教授又一次提到的艺术的价值：</p>
<blockquote>
<p>Isn’t this what art is supposed to all be about?  Why do we have art? What does it do for us?</p>
<p>It gives us a sense of something better, <strong>a vision of something better than the stupid, mundane and the vernacular crap that we have to deal with on a quotidian basis out here.</strong></p>
<p>There could be something better; there’s something bigger and better out there than we are.</p>
<p>That, in essence, is what art is all about and sometimes you can see it and — I think you can see it, or you just seem to be getting nearer to it.</p>
<p>……………</p>
<p> this idea of tapping into who you are, the whole who you are as a person, through getting you back in touch with your inner memories, and also perhaps giving you hope that there is something out there better than what we deal with on a daily basis.</p>
</blockquote>
<p>也顺带提到了开普勒 Kepler 的一段话：</p>
<blockquote>
<p>Man, the ape of his creator, has discovered the art of music so that he might play the everlastingness of all created time in some short part of an hour by means of an artistic concord of many voices and instruments, that he might to some extent taste the satisfaction of God the workman through music.</p>
</blockquote>
</li>
<li><p>Mozart’s Don Giovanni and Conclusion</p>
<p>莫扎特写了三部伟大的歌剧：《费加罗的婚礼》，《唐璜》， 《魔笛》，其中《费加罗的婚礼》，《唐璜》 的脚本都是由  Lorenzo da Ponte 完成。</p>
<p>Lorenzo da Ponte：</p>
<blockquote>
<p>洛伦佐·达·彭特（1749年03月10日－1838年08月17日），原名伊曼纽·科内利亚诺（Emanuele Conegliano），意大利裔美国人，18世纪及19世纪著名歌剧填词家、诗人。他因和作曲家莫札特合作完成了三部著名意大利语歌剧而著名，包括《费加洛婚礼》、《唐·乔望尼》、《女人皆如此》。</p>
<p>【教授说这个人的一生比小说还精彩……】</p>
</blockquote>
<p>随后教授邀请了Richard Lalli 教授，和一些学生一起，演了《唐璜》的部分，一头白发的教授和一个牵着狗的同校教授一起舞剑，也是很用心了。</p>
</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Music/" rel="tag"># Music</a>
          
        </div>
      

      
        
      

      
        
      

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/notes-on-yale-courses-listening-to-music-lecture16/" rel="next" title="Lecture 16 Baroque Music - The Vocal Music of Johann Sebastian Bach">
                <i class="fa fa-chevron-left"></i> Lecture 16 Baroque Music - The Vocal Music of Johann Sebastian Bach
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/notes-on-yale-courses-listening-to-music-lecture18/" rel="prev" title="Lecture 18 Piano Music of Mozart and Beethoven">
                Lecture 18 Piano Music of Mozart and Beethoven <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>
</div>

          </div>
          


          
  <div class="comments" id="comments">
    
      
  <script src="https://utteranc.es/client.js"
    repo="Lupeipei/Lupeipei.github.io"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>


    
  </div>


        </div>
        
          
        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lucia</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
  &nbsp; | &nbsp;
  <span class="post-count">
    <i class="fa fa-pencil" aria-hidden="true"></i>
    388.3k
  </span>

</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  

  

</body>
</html>



